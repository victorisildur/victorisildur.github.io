---
layout: post
title: "全面拥抱es2015: 从页面，后台到测试"
date: 2016-07-01 08:27:00
categories: programming
---

# es6 测试

expect库是一个有力的测试工具，我们期望如下代码能够node test.js以下就能跑起来：

```javascript
import expect from 'expect';
import {byteToIntArr} from './protobuf';

const byteArr = {
    '0': 8, '1': 48, '3': 0
    };

expect(
    byteToIntArr(byteArr)
    ).toEqual(48);

console.log('Tests passed!');
```

然而，直接node运行es6代码会报报错'unexpected reseed word import', 该如何让这段测试用例跑起来呢？
答案是babel-cli。

安装之后，运行`babel-node --presets es2015 test.js`.
至于为什么一定要--presets，有空再说，先上车！

# Object.assign

Object.assign(target, ...sources)

把多个源的可枚举属性copy到目标对象上去。
redux里用于在不改变原state的情况下，在reducer里返回新的state。

但为什么要这么做？

> Because reducers are just functions, you can control the order in which they are called, pass additional data, or even make reusable reducers for common tasks such as pagination.

简单的说，纯函数可以毫无顾忌的去组合，而不用担心副作用。
其他几条还需要在实践中体会。